"use strict";(self.webpackChunknew_react=self.webpackChunknew_react||[]).push([[250],{6639:(e,t,n)=>{n.d(t,{A:()=>r});n(5043);const r=n.p+"static/media/info.3c6aadd21ff7c0a944edc8538389b043.svg"},7809:(e,t,n)=>{n.d(t,{A:()=>a});n(5043);const r=n.p+"static/media/fullDescription.6905c92fd350198ab3cf65e762035312.svg";var s=n(579);const a=e=>{let{fullDescription:t,...n}=e;return(0,s.jsx)(s.Fragment,{children:t.length>0?(0,s.jsxs)("div",{...n,className:"FullDescription",children:[(0,s.jsxs)("div",{className:"FullDescription-top",children:[(0,s.jsx)("p",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,s.jsx)("img",{src:r,alt:""})]}),(0,s.jsx)("p",{className:"FullDescriptionBottom",children:t})]}):""})}},6912:(e,t,n)=>{n.d(t,{A:()=>r});const r=[]},4588:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var r=n(5043),s=n(5502),a=n(7573);const o={Budget:"Budget_Budget__SO23W",GreyText:"Budget_GreyText__1gaYU",absolute:"Budget_absolute__AiGNW"};var i=n(1772);const l={BudgetInput:"BudgetInput_BudgetInput__g5su3",hidden:"BudgetInput_hidden__gEhc2",input:"BudgetInput_input__wrMd8",budgetText:"BudgetInput_budgetText__N2-L2",bottomTextContainer:"BudgetInput_bottomTextContainer__3HEoF",text:"BudgetInput_text__oOteG",absolute:"BudgetInput_absolute__6MsBB"};var c=n(6639),d=n(579);const u=e=>{let{className:t,setBudget:n,budget:s,tonValue:a,style:o,errorTon:i}=e;const u=(0,r.useRef)(null);return(0,d.jsxs)("label",{htmlFor:"budget",className:t?[t,l.BudgetInput].join(" "):l.BudgetInput,children:[(0,d.jsx)("p",{className:[l.input,l.hidden].join(" "),ref:u}),(0,d.jsx)("p",{style:s?{display:"none"}:{color:o.color},className:[l.input,l.absolute].join(" "),children:" 0 "}),(0,d.jsx)("input",{style:o,value:s,onChange:e=>{var t;n((t=e.target.value,"0123456789".includes(t[t.length-1])?function(e){let t=e;t.length>1&&"0"===t[0]&&(t=t.replace("0","")),t=t.replaceAll(" ","").substring(0,6);const n=t.length,r=t.split("").reduceRight(((e,t,r)=>((n-r)%3===0?" ":"")+t+e),"");return" "===r[0]?r.slice(1):r}(e.target.value):e.target.value.substring(0,e.target.value.length-1)))},inputMode:"numeric",id:"budget",name:"budget",type:"text",onFocus:e=>{document.documentElement.style.overflowY="hidden",setTimeout((()=>{document.documentElement.style.overflowY="unset"}),2e3),n("0"===e.target.value?"":e.target.value)},onBlur:e=>{n(e.target.value.length>0?e.target.value:"0")},className:l.input,pattern:"0"}),(0,d.jsx)("p",{style:{left:u.current?(u.current.innerText=s,"calc("+(u.current.offsetWidth+15)+"px)"):"0px",color:o.color},className:l.budgetText,children:"RUB"}),i?(0,d.jsx)("div",{className:l.bottomTextContainer,children:(0,d.jsx)("p",{className:l.text,style:{color:"#FF6767"},children:"\u0421\u0443\u043c\u043c\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 0.5 \u0442\u043e\u043d\u043d"})}):(0,d.jsxs)("div",{className:l.bottomTextContainer,children:[(0,d.jsxs)("p",{className:l.text,children:["\u041a \u0445\u043e\u043b\u0434\u0443 ",(0,d.jsxs)("span",{children:[" ",a," TON "]})]}),(0,d.jsx)("img",{src:c.A,alt:""})]})]})},m=(0,r.memo)(u),p=e=>{let{className:t,taskInformation:n,setTaskInformation:r,tonConstant:s,errorTon:a}=e;return(0,d.jsxs)("div",{className:t?[t,o.Budget].join(" "):o.Budget,children:[(0,d.jsx)(i.A,{className:o.GreyText+" animut",children:" \u0412\u0430\u0448 \u0431\u044e\u0434\u0436\u0435\u0442 "}),(0,d.jsx)(m,{style:a?{color:"#FF6767"}:{},errorTon:a,tonConstant:s,setTonValue:e=>r({...n,tonValue:e}),tonValue:n.tonValue,budget:n.budget,setBudget:e=>{r({...n,budget:e,tonValue:(Number(e.replaceAll(" ",""))/s).toFixed(2)})}})]})},g={DatePicker:"DatePicker_DatePicker__3CNeq",picker:"DatePicker_picker__EAwT5",CatchDate:"DatePicker_CatchDate__wye65",GreyText:"DatePicker_GreyText__3opGo"};var h=n(2822),f=n(9080);const y=e=>{let{className:t,taskInformation:n,setTaskInformation:s,GreyIntWidth:a,GreyWidth:o,setState:l,state:c,errors:u,...m}=e;const[p,y]=(0,r.useState)("startOnly");return(0,d.jsxs)("div",{...m,className:t?[g.DatePicker,t].join(" "):g.DatePickerr,children:[(0,d.jsx)(i.A,{className:g.GreyText,children:"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}),(0,d.jsx)(f.A,{values:["\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430","\u041f\u0435\u0440\u0438\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"],keys:["startOnly","startAndEnd"],nowKey:p,setNowKey:y,GreyIntWidth:a,GreyWidth:o}),(0,d.jsx)(h.A,{className:g.CatchDate,whichOne:p,state:c,setState:l,errors:u,isMyInformation:!1})]})},T=(0,r.memo)(y);var x=n(4787),v=n.n(x),b=n(7011),w=n(3327);Date.prototype.addHours=function(e){return this.setTime(this.getTime()+60*e*60*1e3),this};const k=e=>{let{taskInformation:t,setTaskInformation:n,tonConstant:s,GreyWidth:o,GreyIntWidth:i,errors:l}=e;const c={1:"\u042f\u043d\u0432",2:"\u0424\u0435\u0432",3:"\u041c\u0430\u0440\u0442",4:"\u0410\u043f\u0440",5:"\u041c\u0430\u0439",6:"\u0418\u044e\u043d\u044c",7:"\u0418\u044e\u043b\u044c",8:"\u0410\u0432\u0433",9:"\u0421\u0435\u043d",10:"\u041e\u043a\u0442",11:"\u041d\u043e\u044f",12:"\u0414\u0435\u043a"},u={month:{format:e=>c[e.getMonth()+1],caption:"\u041c\u0435\u0441",step:1},date:{format:"DD",caption:"\u0414\u0435\u043d\u044c",step:1},hour:{format:"hh",caption:"\u0427\u0430\u0441",step:1}},[m,g]=(0,r.useState)({time:(new Date).addHours(1),isOpen:!1,isPicked:!1,singleOpen:null,startTime:null,endTime:null,isSingleOpen:!1,isStartOpen:!1,isEndOpen:!1});let h=document.querySelectorAll(".datepicker-modal")[1],f=document.querySelectorAll(".datepicker")[1];return h&&f&&(h.style.display="block",h.style.zIndex="-1",h.style.backgroundColor="unset",h.style.transition="0.3s",f.style.transition="0.3s"),(0,r.useEffect)((()=>{h&&f&&(m.isOpen?(h.style.zIndex="100",h.style.backgroundColor="rgba(0, 0, 0, .6)",f.style.transform="translateY(0%)",w.A.hide()):(w.A.show(),h.style.backgroundColor="unset",h.style.display="block",f.style.transform="translateY(100%)"))}),[m.isOpen,h,f]),(0,d.jsxs)("div",{className:b.A.SecondAddCreating,style:{minWidth:document.documentElement.clientWidth.toString()+"px"},children:[(0,d.jsx)(v(),{confirmText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430",theme:"ios",showCaption:!0,dateConfig:u,value:m.time,isOpen:!0,onSelect:function(e){m.isStartOpen&&(g({...m,time:e,isOpen:!1,isStartOpen:!1,startTime:e}),n({...t,startTime:e})),m.isSingleOpen&&(g({...m,time:e,isOpen:!1,isSingleOpen:!1,singleTime:e}),n({...t,singleTime:e})),m.isEndOpen&&(g({...m,time:e,isOpen:!1,isEndOpen:!1,endTime:e}),n({...t,endTime:e}))},onCancel:function(){g({...m,isOpen:!1})},min:new Date((new Date).addHours(1)+1)}),(0,d.jsxs)(a.A,{className:b.A.Cap,step:2,children:[" ",(0,d.jsx)("p",{className:b.A.CapText,children:" \u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0435 "})," "]}),(0,d.jsx)(p,{errorTon:l.ton,taskInformation:t,setTaskInformation:n,className:b.A.Budget,tonConstant:s}),(0,d.jsx)(T,{errors:{singleError:l.singleError,startError:l.startError,endError:l.endError},state:m,setState:g,GreyWidth:o,GreyIntWidth:i,taskInformation:t,setTaskInformation:n,className:b.A.DatePicker})]})},E=(0,r.memo)(k);var A=n(2880),C=n(3003),I=n(496),_=n(653),j=n(3216),N=n(3977);n(4450);const O=()=>(0,d.jsxs)("div",{className:"postLoader",children:[(0,d.jsx)(N.lM,{visible:!0,height:"80",width:"80",color:"white",ariaLabel:"triangle-loading",wrapperStyle:{},wrapperClass:""}),(0,d.jsx)("div",{className:"loaderText-block",children:(0,d.jsx)("p",{className:"loaderText",children:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f"})})]});var B=n(6912),S=n(2192),D=n(7154);let V=0;const W=()=>{const e=(0,C.d4)((e=>e.telegramUserInfo)),[t,n]=(0,r.useState)({category:{name:"",value:""},subCategory:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",taskName:"",taskDescription:"",photos:[],customerName:e.firstName,creationTime:new Date,userPhoto:e.photo,time:{start:new Date,end:new Date}}),[a,o]=(0,r.useState)({budget:0,tonValue:0,startTime:"",endTime:"",singleTime:"",isPrivate:!1,time:{start:new Date,end:new Date}}),i=(0,C.d4)((e=>e.ton.value)),l=(0,j.Zp)(),c=(0,C.wA)(),u=(0,r.useRef)(null),m=(0,C.d4)((e=>e.information.postTaskStatus)),p=(0,C.d4)((e=>e.categorys.category)),g=(0,C.d4)((e=>e.categorys.subCategory));(0,r.useEffect)((()=>{p&&g&&n((e=>({...e,category:p.find((e=>"\u0414\u0440\u0443\u0433\u043e\u0435"===e.category)),subCategory:g.find((e=>"\u0414\u0440\u0443\u0433\u043e\u0435"===e.subCategory))})))}),[p,g]),console.log("\u0425\u0430\u0439");const[h,f]=(0,r.useState)({name:!1,ton:!1,singleError:!1,startError:!1,endError:!1});(0,r.useEffect)((()=>{let e=!1,n=!1,r=!1;0===V&&h.name&&t.taskName.length>3&&f({...h,name:!1}),1===V&&(h.ton&&a.tonValue>.5&&f({...h,ton:!1}),document.getElementById("dateSwapper").style.transform?(0===a.startTime.length&&(e=!0),0===a.endTime.length&&(n=!0),a.endTime<=a.startTime&&(n=!0,e=!0)):0===a.singleTime.length&&(r=!0),(!0===h.singleError&&!document.getElementById("dateSwapper").style.transform||(!0===h.startError||!0===h.endError)&&document.getElementById("dateSwapper").style.transform)&&(h.singleError===r&&h.startError===e&&h.endError===n||f({...h,singleError:r,startError:e,endError:n})))}),[h,t.taskName,t.tonValue,a.startTime,a.endTime,a.singleTime,a.tonValue]);const[y,T]=(0,r.useState)(!1),[x,v]=(0,r.useState)(!1);function b(){let e={...a};document.getElementById("dateSwapper").style.transform?e.time={start:e.startTime,end:e.endTime}:e.time={start:e.singleTime,end:""},async function(e){let t=new FormData;t.append("userId",2144832745),t.append("title",e.taskName),t.append("description",e.taskDescription),t.append("deadline",1),t.append("views",0),t.append("category",e.category.id),t.append("subCategory",e.subCategory.id),t.append("price",e.tonValue),document.getElementById("dateSwapper").style.transform?(t.append("startTime",e.startTime),t.append("endTime",e.endTime)):(t.append("startTime",e.singleTime),t.append("endTime",""));if(0!==e.photos.length)for(let r of e.photos)t.append("photos",r);for(let r=0;r<1;r++)try{await D.A.post("https://back-birga.ywa.su/advertisement",t,{headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"}})}catch(n){window.Telegram.WebApp.showAlert("\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435"),console.log(n)}c((0,I.pP)([])),c((0,I.IX)(1))}({...e,...t}),l("/MyAds"),V=0}const k=(0,r.useRef)(null);function N(){for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++)e[t].blur()}(0,r.useEffect)((()=>{t.taskDescription.length>500?w.A.setParams({is_active:!1,color:"#2f2f2f",text_color:"#606060"}):w.A.setParams({color:"#2ea5ff",text_color:"#ffffff",is_active:!0})}),[t.taskDescription,l]);const W=()=>{u.current&&u.current.focus(),function(){let e=!1,n=!1,r=!1,s=!1,o=!1;switch(V){case 0:return t.taskName.length<3&&(e=!0),f({...h,name:e}),Object.values({...h,name:e}).every((e=>!1===e));case 1:return a.tonValue<.5&&(n=!0),document.getElementById("dateSwapper").style.transform?(0===a.startTime.length&&(s=!0),0===a.endTime.length&&(o=!0),a.endTime<=a.startTime&&(o=!0,s=!0)):0===a.singleTime.length&&(r=!0),f({...h,ton:n,singleError:r,startError:s,endError:o}),Object.values({...h,ton:n,singleError:r,startError:s,endError:o}).every((e=>!1===e));case 2:return!0;default:return window.Telegram.WebApp.showAlert("Error (\u0447\u0442\u043e - \u0442\u043e \u043d\u0435 \u0442\u0430\u043a \u043f\u043e\u0448\u043b\u043e.."),!1}}()&&(k.current.classList.remove("oneBack"),k.current.classList.remove("twoBack"),0===V&&(N(),k.current.classList.add("stepOne")),1===V&&(N(),k.current.classList.add("stepTwo")),V+=1,2===V||3===V?w.A.setText("\u0421\u041e\u0417\u0414\u0410\u0422\u042c \u0417\u0410\u0414\u0410\u041d\u0418\u0415"):w.A.setText("\u0414\u0410\u041b\u0415\u0415"),3===V&&(N(),window.Telegram.WebApp.showPopup({title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c?",message:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435?",buttons:[{id:"save",type:"default",text:"\u0414\u0430"},{id:"delete",type:"destructive",text:"\u041d\u0435\u0442"}]},(e=>{"delete"!==e&&null!==e||(V-=1),"save"===e&&b()}))))},G=(0,r.useCallback)((()=>{f({name:!1,ton:!1,singleError:!1,startError:!1,endError:!1}),y||x?y?(N(),T(!1)):(N(),v(!1)):0===V?(N(),y||x||l(B.A[B.A.length-1])):(1===V&&(N(),k.current.classList.remove("stepOne"),k.current.classList.remove("stepTwo"),k.current.classList.add("oneBack")),2===V&&(N(),k.current.classList.remove("stepTwo"),k.current.classList.remove("stepOne"),k.current.classList.add("twoBack")),N(),V-=1,w.A.setText("\u0414\u0410\u041b\u0415\u0415"))}),[y,x,T,v,l]),P=(0,r.useMemo)((()=>(document.documentElement.clientWidth-36)/2),[]),M=(0,r.useMemo)((()=>P.toString()+"px"),[P]);(0,r.useEffect)((()=>(w.A.onClick(W),_.A.onClick(G),()=>{_.A.offClick(G),w.A.offClick(W)})),[G,W]),(0,r.useEffect)((()=>(w.A.show(),_.A.show(),w.A.setText("\u0414\u0410\u041b\u0415\u0415"),()=>{w.A.hide()})),[]);const F=(0,r.useMemo)((()=>({ton:h.ton,singleError:h.singleError,startError:h.startError,endError:h.endError})),[h]);return(0,d.jsx)(A.P.div,{ref:k,className:"AdCreating__container",children:"pending"===m?(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(O,{})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.A,{className:"adCreatingOne",errorName:h.name,setTaskInformation:n,taskInformation:t,MyInformation:!1,mistakes:{timeError:!1,taskName:!1},categorys:p,subCategorys:g,isCategoryChoiceOpen:y,setCatagoryChoiceOpen:T,isSubcategoryChoiceOpen:x,setSubcategoryChoiceOpen:v}),(0,d.jsx)(E,{errors:F,GreyIntWidth:P,GreyWidth:M,setTaskInformation:o,taskInformation:a,tonConstant:i}),(0,d.jsx)(S.A,{style:{position:"static",minWidth:"100vw",transform:"translateX(0%)"},end:!0,orderInformation:{...t,...a,category:t.category.id}})]})})}},4450:()=>{},5843:(e,t,n)=>{n.d(t,{Wx:()=>m});var r=n(5043),s=Object.defineProperty,a=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!==typeof t?t+"":t,n),o=new Map,i=new WeakMap,l=0,c=void 0;function d(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return"".concat(t,"_").concat("root"===t?(n=e.root)?(i.has(n)||(l+=1,i.set(n,l.toString())),i.get(n)):"0":e[t]);var n})).toString()}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){const s=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}const{id:s,observer:a,elements:i}=function(e){const t=d(e);let n=o.get(t);if(!n){const r=new Map;let s;const a=new IntersectionObserver((t=>{t.forEach((t=>{var n;const a=t.isIntersecting&&s.some((e=>t.intersectionRatio>=e));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=a),null==(n=r.get(t.target))||n.forEach((e=>{e(a,t)}))}))}),e);s=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:a,elements:r},o.set(t,n)}return n}(n),l=i.get(e)||[];return i.has(e)||i.set(e,l),l.push(t),a.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(i.delete(e),a.unobserve(e)),0===i.size&&(a.disconnect(),o.delete(s))}}r.Component;function m(){let{threshold:e,delay:t,trackVisibility:n,rootMargin:s,root:a,triggerOnce:o,skip:i,initialInView:l,fallbackInView:c,onChange:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var m;const[p,g]=r.useState(null),h=r.useRef(),[f,y]=r.useState({inView:!!l,entry:void 0});h.current=d,r.useEffect((()=>{if(i||!p)return;let r;return r=u(p,((e,t)=>{y({inView:e,entry:t}),h.current&&h.current(e,t),t.isIntersecting&&o&&r&&(r(),r=void 0)}),{root:a,rootMargin:s,threshold:e,trackVisibility:n,delay:t},c),()=>{r&&r()}}),[Array.isArray(e)?e.toString():e,p,a,s,o,i,n,c,t]);const T=null==(m=f.entry)?void 0:m.target,x=r.useRef();p||!T||o||i||x.current===T||(x.current=T,y({inView:!!l,entry:void 0}));const v=[g,f.inView,f.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}}}]);
//# sourceMappingURL=250.35b132d6.chunk.js.map